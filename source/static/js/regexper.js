!function(exports, global, require){
global.regexper = exports;
// Generated by CoffeeScript 1.10.0
var parser;

parser = function(expression) {
  return {
    exps: [
      {
        type: 'anchor',
        content: 'start'
      }, {
        type: 'literal',
        content: '['
      }, {
        type: 'subexp',
        content: []
      }, {
        type: 'literal',
        content: ']'
      }, {
        type: 'anchor',
        content: 'end'
      }
    ],
    flags: ['Global', 'Ignore Case', 'Multiline']
  };
};

exports.parser = parser;

// Generated by CoffeeScript 1.10.0
var _render, _renderLabel, _renderLabeledBox, render;

render = function(svg, expression) {
  var box, group, res;
  res = parser(expression);
  res.svg = svg;
  svg = Snap(svg);
  group = _render(svg, 'root', res);
  box = group.getBBox();
  group.transform(Snap.matrix().translate(10 - box.x, 10 - box.y));
  return svg.attr({
    width: box.width + 20,
    height: box.height + 20
  });
};

_render = function(svg, type, exp) {
  var group;
  group = svg.group().addClass(type);
  return (eval('_' + type))(group, exp);
};

_renderLabel = function(group, text) {
  var box, label, margin, rect;
  label = group.addClass('label');
  rect = label.rect();
  text = label.text(0, 0, text);
  box = text.getBBox();
  margin = 5;
  text.transform(Snap.matrix().translate(margin, box.height / 2 + 2 * margin));
  rect.attr({
    width: box.width + 2 * margin,
    height: box.height + 2 * margin
  });
  return label;
};

_renderLabeledBox = function(svg, text) {};

exports.render = render;

// Generated by CoffeeScript 1.10.0
var _anchor;

_anchor = function(group, exp) {
  var box;
  box = group.getBBox();
  return _renderLabel(group, [exp]);
};

// Generated by CoffeeScript 1.10.0


// Generated by CoffeeScript 1.10.0
var _literal;

_literal = function(group, exp) {
  var label, spans;
  label = group.group();
  _renderLabel(label, ['\u201c', exp, '\u201d']);
  spans = label.selectAll('tspan');
  spans[0].addClass('quote');
  spans[2].addClass('quote');
  label.select('rect').attr({
    rx: 3,
    ry: 3
  });
};

// Generated by CoffeeScript 1.10.0
var _match;

_match = function(group, res) {
  var _connect, box, exp, i, item, item_padding, item_width, items, j, k, l, len, len1, len2, line, path, ref;
  group.transform(Snap.matrix().translate(10, res.match));
  ref = res.exps;
  for (j = 0, len = ref.length; j < len; j++) {
    exp = ref[j];
    _render(group, exp.type, exp.content);
  }
  items = group.selectAll(res.svg + ' > g > g > g');
  item_width = [0];
  item_padding = 10;
  _connect = function(item, i) {
    var box, move;
    box = item.getBBox();
    if (0 === i) {
      move = 0;
    } else {
      move = item_width[i - 1];
    }
    item_width[i] = move + box.width + item_padding;
    item.transform(Snap.matrix().translate(move, 0));
  };
  for (i = k = 0, len1 = items.length; k < len1; i = ++k) {
    item = items[i];
    _connect(item, i);
  }
  item_width.splice(-1);
  box = group.getBBox();
  path = [];
  for (l = 0, len2 = item_width.length; l < len2; l++) {
    line = item_width[l];
    path.push('M' + line + ',' + box.r1 + 'H' + (line - item_padding));
  }
  group.path(path.join(''));
  return group;
};

// Generated by CoffeeScript 1.10.0
var _root;

_root = function(group, res) {
  var box, flag, match, path;
  if (res.flags.length > 0) {
    flag = group.text(0, 0, 'Flags: ' + res.flags.join(', '));
  }
  res.match = res.flags.length > 0 ? flag.getBBox().height : 0;
  match = _render(group, 'match', res);
  box = match.getBBox();
  path = 'M' + box.x + ',' + box.cy + 'H0M' + box.x2 + ',' + box.cy + 'H' + (box.x2 + 10);
  group.path(path);
  group.circle(0, box.cy, 5);
  group.circle(box.x2 + 10, box.cy, 5);
  return group;
};

// Generated by CoffeeScript 1.10.0
var _subexp;

_subexp = function(svg, exp) {};

}({}, function(){ return this; }(), function(name){ return this[name]; });